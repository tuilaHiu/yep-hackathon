---
trigger: manual
---

# PYTHON CODING STANDARDS & EXECUTION PROTOCOLS

## 1. Python Coding Standards
All code generated must strictly adhere to the following rules:

### A. Style & Formatting
- **Repo First:** Follow existing repo lint/format configs (ruff/black/isort/etc.) if present.
- **PEP 8:** Follow PEP 8 for indentation, spacing, and naming.
- **Naming:**
  - Variables/Functions: `snake_case`
  - Classes: `PascalCase`
  - Constants: `UPPER_CASE`
- **Imports:** Standard library -> Third-party -> Local application.

### B. Type Hinting & Docstrings (MANDATORY)
- **Type Hints:** All function args + return must have type hints.
- **Docstrings:** Every module, class, and public function must have a docstring (Google/NumPy):
  - Purpose, Args, Returns, Raises (if applicable).

### C. Error Handling
- Catch specific exceptions (e.g., `except ValueError:`).
- **NEVER** use bare `except:` except at top-level entry point for logging.

### D. Tests (MANDATORY when behavior changes)
- If behavior changes, **MUST** add/update tests.

---

## 2. Execution Logging Protocol (CRITICAL)
Every time an agent modifies the codebase (create/update/delete/refactor/rename/move), it MUST log the action.

### Log Location (MANDATORY)
All logs MUST be stored under:
`.agent-execution/{task_name}/log/execution__{plan_file_stem}.md`

Where:
- `{task_name}` = folder name generated by Planning Agent (snake_case)
- `{plan_file_stem}` = the assigned plan filename WITHOUT `.md`
  (example: `01_backend_api__owner_coding_backend_agent`)

Rules:
- Always append. Never overwrite.
- Create directories if missing.
- The log file name MUST be derived from the plan file stem (no manual naming).

### Log Entry Format
```markdown
## [YYYY-MM-DD HH:MM:SS] Task: {Brief Task Title}
- **Action:** [Create | Update | Delete | Refactor | Rename/Move]
- **Files Affected:**
  - `path/to/file1.py`
- **Summary:** {What changed + why (1-3 lines).}
- **Verify:** {Command(s) or steps to confirm.}
- **Status:** ✅ Success | ⚠️ Partial | ❌ Failed
